{"openapi":"3.0.0","info":{"description":"Destination API Gateway","version":"1.0.0","title":"Destination API Gateway"},"tags":[{"name":"Destination Lists API","description":"Umbrella Destination Lists Management"},{"name":"Destinations API","description":"Umbrella Destinations Management"}],"paths":{"/v1/organizations/{organizationId}/destinationlists":{"get":{"tags":["Destination Lists API"],"summary":"Retrieve all destination lists of organization","parameters":[{"name":"authorization","in":"header","description":"Authorization: Basic XXXXXX","schema":{"type":"string"}},{"name":"organizationId","in":"path","description":"Organization ID","required":true,"schema":{"type":"integer"}}],"security":[{"Basic":[]}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DestinationListCollection"}}}},"400":{"$ref":"#/components/responses/GetBadRequest"},"401":{"$ref":"#/components/responses/Unauthorized"},"403":{"$ref":"#/components/responses/Forbidden"},"404":{"$ref":"#/components/responses/NotFound"},"500":{"$ref":"#/components/responses/Error"}}},"post":{"tags":["Destination Lists API"],"summary":"Create a destination list","parameters":[{"name":"authorization","in":"header","description":"Authorization: Basic XXXXXX","schema":{"type":"string"}},{"name":"organizationId","in":"path","description":"Organization ID","required":true,"schema":{"type":"integer"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DestinationListCreate"}}},"description":"List of destinations","required":true},"security":[{"Basic":[]}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DestinationListEntity"}}}},"400":{"$ref":"#/components/responses/BadRequest"},"401":{"$ref":"#/components/responses/Unauthorized"},"403":{"$ref":"#/components/responses/Forbidden"},"404":{"$ref":"#/components/responses/NotFound"},"500":{"$ref":"#/components/responses/Error"}}}},"/v1/organizations/{organizationId}/destinationlists/{destinationListId}":{"patch":{"tags":["Destination Lists API"],"summary":"Rename destination list","parameters":[{"name":"authorization","in":"header","description":"Authorization: Basic XXXXXX","schema":{"type":"string"}},{"name":"organizationId","in":"path","description":"Organization ID","required":true,"schema":{"type":"integer"}},{"name":"destinationListId","in":"path","description":"Destination List ID","required":true,"schema":{"type":"integer"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DestinationListPatch"}}},"required":true},"security":[{"Basic":[]}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DestinationListEntity"}}}},"400":{"$ref":"#/components/responses/PatchBadRequest"},"401":{"$ref":"#/components/responses/Unauthorized"},"403":{"$ref":"#/components/responses/Forbidden"},"404":{"$ref":"#/components/responses/NotFound"},"500":{"$ref":"#/components/responses/Error"}}},"delete":{"tags":["Destination Lists API"],"summary":"Delete destination list","parameters":[{"name":"authorization","in":"header","description":"Authorization: Basic XXXXXX","schema":{"type":"string"}},{"name":"organizationId","in":"path","description":"Organization ID","required":true,"schema":{"type":"integer"}},{"name":"destinationListId","in":"path","description":"Destination list ID","required":true,"schema":{"type":"integer"}}],"security":[{"Basic":[]}],"responses":{"200":{"description":"Success","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DestinationListDelete"}}}},"400":{"$ref":"#/components/responses/GetBadRequest"},"401":{"$ref":"#/components/responses/Unauthorized"},"403":{"$ref":"#/components/responses/Forbidden"},"404":{"$ref":"#/components/responses/NotFound"},"500":{"$ref":"#/components/responses/Error"}}},"get":{"tags":["Destination Lists API"],"summary":"Return destination list","parameters":[{"name":"authorization","in":"header","description":"Authorization: Basic XXXXXX","schema":{"type":"string"}},{"name":"organizationId","in":"path","description":"Organization ID","required":true,"schema":{"type":"integer"}},{"name":"destinationListId","in":"path","description":"Destination List ID","required":true,"schema":{"type":"integer"}}],"security":[{"Basic":[]}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DestinationList"}}}},"400":{"$ref":"#/components/responses/GetBadRequest"},"401":{"$ref":"#/components/responses/Unauthorized"},"403":{"$ref":"#/components/responses/Forbidden"},"404":{"$ref":"#/components/responses/NotFound"},"500":{"$ref":"#/components/responses/Error"}}}},"/v1/organizations/{organizationId}/destinationlists/{destinationListId}/destinations":{"get":{"tags":["Destinations API"],"summary":"Get list of destinations related to destination list","parameters":[{"name":"authorization","in":"header","description":"Authorization: Basic XXXXXX","schema":{"type":"string"}},{"name":"organizationId","in":"path","description":"Organization ID","required":true,"schema":{"type":"integer"}},{"name":"destinationListId","in":"path","description":"Destination List ID","required":true,"schema":{"type":"integer"}},{"name":"page","in":"query","description":"Pagination","required":false,"schema":{"type":"integer"}},{"name":"limit","in":"query","description":"Limit for page","required":false,"schema":{"type":"integer"}}],"security":[{"Basic":[]}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DestinationsEntity"}}}},"400":{"$ref":"#/components/responses/GetBadRequest"},"401":{"$ref":"#/components/responses/Unauthorized"},"403":{"$ref":"#/components/responses/Forbidden"},"404":{"$ref":"#/components/responses/NotFound"},"500":{"$ref":"#/components/responses/Error"}}},"post":{"tags":["Destinations API"],"summary":"Add list of destinations to destination list","parameters":[{"name":"authorization","in":"header","description":"Authorization: Basic XXXXXX","schema":{"type":"string"}},{"name":"organizationId","in":"path","description":"Organization ID","required":true,"schema":{"type":"integer"}},{"name":"destinationListId","in":"path","description":"Destination List ID","required":true,"schema":{"type":"integer"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DestinationsList"}}}},"description":"List of destinations","required":true},"security":[{"Basic":[]}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DestinationsResponse"}}}},"400":{"$ref":"#/components/responses/GetBadRequest"},"401":{"$ref":"#/components/responses/Unauthorized"},"403":{"$ref":"#/components/responses/Forbidden"},"404":{"$ref":"#/components/responses/NotFound"},"500":{"$ref":"#/components/responses/Error"}}}},"/v1/organizations/{organizationId}/destinationlists/{destinationListId}/destinations/remove":{"delete":{"tags":["Destinations API"],"summary":"Delete list of destinations from destination list","parameters":[{"name":"authorization","in":"header","description":"Authorization: Basic XXXXXX","schema":{"type":"string"}},{"name":"organizationId","in":"path","description":"Organization ID","required":true,"schema":{"type":"integer"}},{"name":"destinationListId","in":"path","description":"Destination List ID","required":true,"schema":{"type":"integer"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DestinationIdsList"}}},"description":"List of destination Id's","required":true},"security":[{"Basic":[]}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DestinationsResponse"}}}},"400":{"$ref":"#/components/responses/GetBadRequest"},"401":{"$ref":"#/components/responses/Unauthorized"},"403":{"$ref":"#/components/responses/Forbidden"},"404":{"$ref":"#/components/responses/NotFound"},"500":{"$ref":"#/components/responses/Error"}}}}},"servers":[{"url":"https://management.api.umbrella.com"},{"url":"http://management.api.umbrella.com"}],"components":{"responses":{"NotFound":{"description":"Not Found- A resource specified in the URL was not found","content":{"*/*":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":404,"description":"the http status error code returned."},"error":{"type":"string","example":"Not Found","description":"a brief description of the error"},"txId":{"type":"string","example":"a478k9i2b723"}}}}}},"Unauthorized":{"description":"Unauthorized - The authorization header is missing or the token is unauthorized","content":{"*/*":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Unauthorized","description":"a brief description of the error"}}}}}},"Forbidden":{"description":"Forbidden - The token is invalid","content":{"*/*":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Invalid authentication credentials"}}}}}},"GetBadRequest":{"description":"Validation Error","content":{"*/*":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":400,"description":"the http status error code returned."},"error":{"type":"string","example":"Bad Request","description":"a brief description of the error"},"message":{"type":"string","example":"Validation Error"},"txId":{"type":"string","example":"d479k9i2b723"}}}}}},"PatchBadRequest":{"description":"Validation Error","content":{"*/*":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":400,"description":"the http status error code returned."},"error":{"type":"string","example":"Bad Request","description":"a brief description of the error"},"txId":{"type":"string","example":"e477l9i2b903"}}}}}},"BadRequest":{"description":"Validation Error","content":{"*/*":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":400,"description":"the http status error code returned."},"error":{"type":"string","example":"invalid_request","description":"a brief description of the error"},"message":{"type":"object","properties":{"someProperty":{"type":"object","properties":{"code":{"type":"string","example":"required"},"code_text":{"type":"string","example":"field is required"}}}}},"code":{"type":"integer","example":400},"code_text":{"type":"string","example":"Bad Request"},"txId":{"type":"string","example":"k477k9i2b723"}}}}}},"Error":{"description":"Error- This request could not be processed by the server","content":{"*/*":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":500,"description":"the http status error code returned."},"error":{"type":"string","example":"Internal Server Error","description":"a brief description of the error"},"message":{"type":"string","example":"An internal server error occurred"},"txId":{"type":"string","example":"l477k9i2b893"}}}}}}},"securitySchemes":{"Basic":{"type":"apiKey","name":"Authorization","in":"header"}},"schemas":{"DestinationListCollection":{"type":"array","items":{"type":"object","required":["id","organizationId","access","isGlobal","name","thirdpartyCategoryId","createdAt","modifiedAt","isMspDefault","markedForDeletion"],"properties":{"id":{"type":"integer","example":1234567,"description":"Unique id of the destination list."},"organizationId":{"type":"integer","example":2345678},"access":{"type":"string","example":"allow","description":"Access can be allow or block. It defines destinationlist type."},"isGlobal":{"type":"boolean","example":true,"description":"isGlobal can be true or false. There will be only one default destination list of type allow or block for an organization."},"name":{"type":"string","example":"Global Allow List"},"thirdpartyCategoryId":{"type":"integer","example":{}},"createdAt":{"type":"integer","example":1490206249},"modifiedAt":{"type":"integer","example":1520476127},"isMspDefault":{"type":"boolean","example":false},"markedForDeletion":{"type":"boolean","example":false},"meta":{"type":"object","properties":{"destinationCount":{"type":"integer","example":5,"description":"Total number of destinations in a destination list."},"domainCount":{"type":"integer","example":5,"description":"Total number of domains in a destination list. Domains are part of total destinations in a destination lists. "},"urlCount":{"type":"integer","example":0,"description":"Total number of Urls in a destination list. Urls are part of total destinations in a destination lists. "},"ipv4Count":{"type":"integer","example":0,"description":"Total number of Ip's in a destination list. Ip's are part of total destinations in a destination lists. "}}}}}},"DestinationsResponse":{"type":"object","properties":{"id":{"type":"integer","example":1234567,"description":"Unique id of the destination list."},"organizationId":{"type":"integer","example":2345678},"access":{"type":"string","example":"allow","description":"Access can be allow or block. It defines destinationlist type."},"isGlobal":{"type":"boolean","example":true,"description":"isGlobal can be true or false. There will be only one default destination list of type allow or block for an organization."},"name":{"type":"string","example":"Global Allow List"},"thirdpartyCategoryId":{"type":"integer","example":{}},"createdAt":{"type":"integer","example":1490206249},"modifiedAt":{"type":"integer","example":1520476127},"isMspDefault":{"type":"boolean","example":false},"markedForDeletion":{"type":"boolean","example":false},"meta":{"type":"object","properties":{"destinationCount":{"type":"integer","example":5,"description":"Total number of destinations in a destination list."}}}}},"DestinationListCreate":{"type":"object","required":["access","isGlobal","name"],"properties":{"access":{"type":"string","example":"allow","description":"Access can be allow or block. It defines destinationlist type."},"isGlobal":{"type":"boolean","example":false,"description":"isGlobal can be true or false. There will be only one default destination list of type allow or block for an organization."},"name":{"type":"string","example":"New Destination List"},"destinations":{"type":"array","items":{"type":"object","properties":{"destination":{"type":"string","example":"<domain_name>","description":"Destination can be domain, url, ip"},"type":{"type":"string","example":"DOMAIN","description":"Type can be DOMAIN, URL, IPV4"},"comment":{"type":"string","example":"Added new destination list"}}}}}},"DestinationListPatch":{"type":"object","required":["name"],"properties":{"name":{"type":"string","example":"sample destination list","description":"name of the destination list"}}},"DestinationsList":{"type":"object","required":["destination"],"properties":{"destination":{"type":"string","example":"google.com or google.com/news or 10.10.10.10","description":"name of the destination"},"comment":{"type":"string","example":"sample comment for destination","description":"comment for destination"}}},"DestinationIdsList":{"type":"array","items":{"type":"integer","example":1234}},"DestinationListEntity":{"type":"object","properties":{"id":{"type":"integer","example":2477857,"description":"Unique id of the destination list."},"organizationId":{"type":"integer","example":22429759},"access":{"type":"string","example":"allow","description":"Access can be allow or block. It defines destinationlist type."},"isGlobal":{"type":"boolean","example":false,"description":"isGlobal can be true or false. There will be only one default destination list of type allow or block for an organization."},"name":{"type":"string","example":"New Destination List"},"thirdpartyCategoryId":{"type":"integer","example":{}},"createdAt":{"type":"integer","example":1532628019},"modifiedAt":{"type":"integer","example":1532628019},"isMspDefault":{"type":"boolean","example":false},"markedForDeletion":{"type":"boolean","example":false},"meta":{"type":"object","properties":{"destinationCount":{"type":"integer","example":1,"description":"Total number of destinations in a destination list."}}}}},"DestinationList":{"type":"object","properties":{"id":{"type":"integer","example":1234567,"description":"Unique id of the destination list."},"organizationId":{"type":"integer","example":2345678},"access":{"type":"string","example":"block","description":"Access can be allow or block. It defines destinationlist type."},"isGlobal":{"type":"boolean","example":false,"description":"isGlobal can be true or false. There will be only one default destination list of type allow or block for an organization."},"name":{"type":"string","example":"New Destination List"},"thirdpartyCategoryId":{"type":"integer","example":{}},"createdAt":{"type":"integer","example":1512409632},"modifiedAt":{"type":"integer","example":1512409632},"isMspDefault":{"type":"boolean","example":false},"markedForDeletion":{"type":"boolean","example":false}}},"DestinationsEntity":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","example":12345,"description":"Unique id of the destination."},"destination":{"type":"string","example":"foo.com","description":"Destination can be domain, url, ip"},"type":{"type":"string","example":"domain","description":"Type can be DOMAIN, URL, IPV4"},"comment":{"type":"string","example":{}},"createdAt":{"type":"string","example":"2018-07-23 19:36:45"}}}},"DestinationListDelete":{"example":[]}}},"x-explorer-enabled":true,"x-proxy-enabled":true,"x-samples-enabled":true,"x-samples-languages":["curl","node","ruby","javascript","python"]}
